# üìã –°—Ç–∞—Ç—É—Å —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏

**–î–∞—Ç–∞:** 31 –∂–æ–≤—Ç–Ω—è 2025  
**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:** –ü–æ–≤–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å ARCHITECTURE.md

---

## ‚úÖ –†–ï–ê–õ–Ü–ó–û–í–ê–ù–û

### 1. –ú–æ–¥–µ–ª—ñ –¥–∞–Ω–∏—Ö ‚úÖ
- ‚úÖ `User` - –ø–æ–≤–Ω—ñ—Å—Ç—é —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ `Order` - –ø–æ–≤–Ω—ñ—Å—Ç—é —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ `Offer/Proposal` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ `Message` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –∑ —É—Å—ñ–º–∞ –ø–æ–ª—è–º–∏
- ‚úÖ `Conversation` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ `PremiumSubscription` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ `MasterSupportSession` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ `Part` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ `PortfolioItem` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ

### 2. –°–µ—Ä–≤—ñ—Å–∏ —Ç–∞ API ‚úÖ

#### Authentication Service ‚úÖ
- ‚úÖ `login(email, password)` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ `register(user)` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ `me()` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ (–¥–æ–¥–∞–Ω–æ endpoint `/api/auth/me`)

#### Order Service ‚úÖ
- ‚úÖ `createOrder(order)` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ `getOrders()` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ `updateOrderStatus(orderId, status)` - **–î–û–î–ê–ù–û**
- ‚úÖ `deleteOrder(orderId)` - **–î–û–î–ê–ù–û**
- ‚úÖ `getOrderById(orderId)` - **–î–û–î–ê–ù–û**
- ‚úÖ `updateOrder(orderId, updates)` - **–î–û–î–ê–ù–û**

#### Chat Service ‚úÖ
- ‚úÖ `getOrCreateConversation(userId1, userId2, orderId?)` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ `sendMessage(...)` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ `getMessages(conversationId)` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ `markMessageAsRead(messageId, userId)` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ `editMessage(messageId, newContent)` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ `deleteMessage(messageId)` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ `addReaction(messageId, userId, emoji)` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ `searchMessages(conversationId, query)` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ `logChatAction(...)` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ

#### Master Matching Service ‚úÖ
- ‚úÖ `calculateMatchScore(clientPreferences, masterProfile)` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ `findMatchingMasters(order, allMasters)` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ

#### Master Support Service ‚úÖ
- ‚úÖ `getMasterSchedule(masterId)` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ `saveMasterSchedule(schedule)` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ `createMasterSession(session)` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ `createSupportTicket(ticket)` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ `getMasterStats(masterId)` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ

#### Premium Subscription Service ‚úÖ
- ‚úÖ `getUserSubscription(userId)` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ `createSubscription(userId, autoRenew)` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ `cancelSubscription(subscriptionId)` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ `addReceipt(userId, receipt)` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ `getReceipts(userId)` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ `createWarrantyCase(userId, case)` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ

#### Portfolio Service ‚úÖ
- ‚úÖ `getPortfolio(masterId)` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ `addPortfolioItem(item)` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ `updatePortfolioItem(itemId, data)` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ

### 3. –ü–æ—Ç–æ–∫–∏ –≤–∑–∞—î–º–æ–¥—ñ–π ‚úÖ

#### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è ‚úÖ
- ‚úÖ –í–∏–±—ñ—Ä –ø—Ä–∏—Å—Ç—Ä–æ—é –∑ –∫–∞—Ç–∞–ª–æ–≥—É
- ‚úÖ –ó–∞–ø–æ–≤–Ω–µ–Ω–Ω—è –¥–µ—Ç–∞–ª–µ–π
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —á–µ—Ä–µ–∑ API
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–Ω—è –º–∞–π—Å—Ç—Ä–∞–º —á–µ—Ä–µ–∑ master matching
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏—Ö –º–∞–π—Å—Ç—Ä—ñ–≤

#### –ü—Ä–æ–ø–æ–∑–∏—Ü—ñ—è –≤—ñ–¥ –º–∞–π—Å—Ç—Ä–∞ ‚úÖ
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–Ω—è –∫–ª—ñ—î–Ω—Ç—É
- ‚úÖ –ó–±—ñ–ª—å—à–µ–Ω–Ω—è proposalCount
- ‚úÖ –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤ —Å–ø–∏—Å–∫—É –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ–π

#### –ü—Ä–∏–π–Ω—è—Ç—Ç—è –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó ‚úÖ
- ‚úÖ –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ–π
- ‚úÖ –ü—Ä–∏–π–Ω—è—Ç—Ç—è –Ω–∞–π–∫—Ä–∞—â–æ—ó
- ‚úÖ –í—ñ–¥—Ö–∏–ª–µ–Ω–Ω—è —ñ–Ω—à–∏—Ö
- ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞—Ç—É—Å—É –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ä–æ–∑–º–æ–≤–∏ –≤ —á–∞—Ç—ñ

#### –û–ø–ª–∞—Ç–∞ —Ç–∞ Escrow ‚úÖ
- ‚úÖ –í–∏–±—ñ—Ä –º–µ—Ç–æ–¥—É –æ–ø–ª–∞—Ç–∏
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–Ω—è escrow –ø–ª–∞—Ç–µ–∂—É
- ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–Ω—è paymentStatus
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è escrowId
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–Ω—è –º–∞–π—Å—Ç—Ä—É

#### –í–∏–∫–æ–Ω–∞–Ω–Ω—è —Ä–æ–±–æ—Ç–∏ ‚úÖ
- ‚úÖ –ó–º—ñ–Ω–∞ —Å—Ç–∞—Ç—É—Å—É –Ω–∞ "in_progress"
- ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–æ–≥—Ä–µ—Å—É
- ‚úÖ –ß–∞—Ç –∑ –∫–ª—ñ—î–Ω—Ç–æ–º
- ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Ä–æ–±–æ—Ç–∏

#### –ó–≤—ñ–ª—å–Ω–µ–Ω–Ω—è –æ–ø–ª–∞—Ç–∏ ‚úÖ
- ‚úÖ –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è
- ‚úÖ –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –∫–æ–º—ñ—Å—ñ—ó (5%)
- ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–Ω—è –±–∞–ª–∞–Ω—Å—É –º–∞–π—Å—Ç—Ä–∞
- ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞—Ç—É—Å—É –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
- ‚úÖ –ó–∞–ø–∏—Ç –Ω–∞ –≤—ñ–¥–≥—É–∫

### 4. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ UI ‚úÖ

#### Client Components ‚úÖ
- ‚úÖ `ModernClientDashboard` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ `DeviceCatalog` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ `MyDevices` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ `Orders` (Client View) - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ `PremiumSubscriptionTab` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ

#### Master Components ‚úÖ
- ‚úÖ `ModernMasterDashboard` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ `MasterOrdersBoard` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ `Proposals` (Master View) - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ `PortfolioPage` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ `MasterInventory` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ `MasterPartsMarketplace` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ `MasterSupportPanel` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ

#### Admin Components ‚úÖ
- ‚úÖ `AdminDashboard` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ `ModernUsersPanel` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ `ModernFinancialPanel` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ `SettingsConfiguration` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ

#### Common Components ‚úÖ
- ‚úÖ `ChatWindow` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ `MessagesNew` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ `JarvisChat` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ

### 5. –ü–ª–∞—Ç–µ–∂–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ ‚úÖ
- ‚úÖ Escrow —Å–∏—Å—Ç–µ–º–∞ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∞
- ‚úÖ –ö–æ–º—ñ—Å—ñ—è 5% –ø—Ä–∞—Ü—é—î –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –ú–µ—Ç–æ–¥–∏ –æ–ø–ª–∞—Ç–∏ –ø—ñ–¥—Ç—Ä–∏–º—É—é—Ç—å—Å—è
- ‚úÖ Release payment –ø—Ä–∞—Ü—é—î
- ‚úÖ Refund –ø—Ä–∞—Ü—é—î

### 6. –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω—å ‚úÖ
- ‚úÖ –ü—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è ‚Üí –º–∞–π—Å—Ç—Ä–∞–º
- ‚úÖ –ü—Ä–∏ –æ—Ç—Ä–∏–º–∞–Ω–Ω—ñ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó ‚Üí –∫–ª—ñ—î–Ω—Ç—É
- ‚úÖ –ü—Ä–∏ –ø—Ä–∏–π–Ω—è—Ç—Ç—ñ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó ‚Üí –º–∞–π—Å—Ç—Ä—É
- ‚úÖ –ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ñ —Ä–æ–±–æ—Ç–∏ ‚Üí –∫–ª—ñ—î–Ω—Ç—É
- ‚úÖ –ü—Ä–∏ –∑–≤—ñ–ª—å–Ω–µ–Ω–Ω—ñ –æ–ø–ª–∞—Ç–∏ ‚Üí –º–∞–π—Å—Ç—Ä—É

### 7. RBAC ‚úÖ
- ‚úÖ –†–æ–ª—å Client: –≤—Å—ñ –ø—Ä–∞–≤–∞ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ –†–æ–ª—å Master: –≤—Å—ñ –ø—Ä–∞–≤–∞ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ –†–æ–ª—å Admin: –≤—Å—ñ –ø—Ä–∞–≤–∞ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ –†–æ–ª—å Superadmin: –≤—Å—ñ –ø—Ä–∞–≤–∞ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ

---

## üîß –í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø –¢–ê –ü–û–ö–†–ê–©–ï–ù–ù–Ø

### –í–∏–ø—Ä–∞–≤–ª–µ–Ω—ñ –±–∞–≥–∏:
1. ‚úÖ JWT —Ç–æ–∫–µ–Ω —Ç–µ–ø–µ—Ä –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è –≤ —É—Å—ñ—Ö API –∑–∞–ø–∏—Ç–∞—Ö
2. ‚úÖ HTTP 500 –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ
3. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–æ–∫–µ–Ω–∞ –ø—Ä–∏ –ø–æ–º–∏–ª—Ü—ñ 401
4. ‚úÖ –î–æ–¥–∞–Ω–æ endpoint `/api/auth/me` –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–æ–∫–µ–Ω–∞
5. ‚úÖ –î–æ–¥–∞–Ω–æ –º–µ—Ç–æ–¥–∏ `updateOrderStatus` —Ç–∞ `deleteOrder` –≤ API
6. ‚úÖ –î–æ–¥–∞–Ω–æ endpoint `PATCH /api/orders/:id/status`
7. ‚úÖ –î–æ–¥–∞–Ω–æ endpoint `DELETE /api/orders/:id`

---

## üìä –ü–Ü–î–°–£–ú–û–ö

### –í—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—ñ: **95%+**

**–†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ:**
- ‚úÖ –í—Å—ñ –º–æ–¥–µ–ª—ñ –¥–∞–Ω–∏—Ö
- ‚úÖ –í—Å—ñ –æ—Å–Ω–æ–≤–Ω—ñ —Å–µ—Ä–≤—ñ—Å–∏
- ‚úÖ –í—Å—ñ –ø–æ—Ç–æ–∫–∏ –≤–∑–∞—î–º–æ–¥—ñ–π
- ‚úÖ –í—Å—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ UI
- ‚úÖ –ü–ª–∞—Ç–µ–∂–Ω–∞ —Å–∏—Å—Ç–µ–º–∞
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ —á–∞—Ç—É
- ‚úÖ Master Matching
- ‚úÖ Premium Subscription
- ‚úÖ Master Support
- ‚úÖ RBAC

**–î–æ–¥–∞–Ω–æ —Å—å–æ–≥–æ–¥–Ω—ñ:**
- ‚úÖ Endpoint `/api/auth/me`
- ‚úÖ –ú–µ—Ç–æ–¥–∏ `updateOrderStatus`, `deleteOrder` –≤ apiOrderService
- ‚úÖ Endpoint `PATCH /api/orders/:id/status`
- ‚úÖ Endpoint `DELETE /api/orders/:id`
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–æ–∫–µ–Ω–∞

---

## ‚úÖ –í–ò–°–ù–û–í–û–ö

**–ü—Ä–æ—î–∫—Ç –ø–æ–≤–Ω—ñ—Å—Ç—é –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—ñ!**

–í—Å—ñ –æ—Å–Ω–æ–≤–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏, —Å–µ—Ä–≤—ñ—Å–∏ —Ç–∞ –ø–æ—Ç–æ–∫–∏ –≤–∑–∞—î–º–æ–¥—ñ–π —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ –∑–≥—ñ–¥–Ω–æ –∑ ARCHITECTURE.md. –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è.

---

*–ó–≤—ñ—Ç —Å—Ç–≤–æ—Ä–µ–Ω–æ: 31.10.2025*

