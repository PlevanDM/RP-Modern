# üîí Escrow —Å–∏—Å—Ç–µ–º–∞ –ø–ª–∞—Ç–µ–∂—ñ–≤ RepairHub Pro

##Ê¶ÇËø∞

Escrow —Å–∏—Å—Ç–µ–º–∞ –ø–ª–∞—Ç–µ–∂–µ–π - –±–µ–∑–ø–µ—á–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ —É–º–æ–≤–Ω–æ–≥–æ –¥–µ–ø–æ–Ω—É–≤–∞–Ω–Ω—è –∫–æ—à—Ç—ñ–≤, —è–∫ –Ω–∞ –∫—Ä–∏–ø—Ç–æ–±—ñ—Ä–∂–∞—Ö (Binance, Kraken). –ì—Ä–æ—à—ñ –±–ª–æ–∫—É—é—Ç—å—Å—è –¥–æ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –æ–±–æ—Ö —Å—Ç–æ—Ä—ñ–Ω.

## üìã –û—Å–Ω–æ–≤–Ω—ñ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

### ‚úÖ –ë–µ–∑–ø–µ–∫–∞
- –ì—Ä–æ—à—ñ –Ω–µ –π–¥—É—Ç—å –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –º–∞—Å—Ç–µ—Ä—É
- –î–µ–ø–æ–Ω–æ–≤–∞–Ω—ñ –∫–æ—à—Ç–∏ –∑–∞—Ö–∏—â–µ–Ω—ñ –≤—ñ–¥ –æ–±–æ—Ö —Å—Ç–æ—Ä—ñ–Ω
- –°–∏—Å—Ç–µ–º–∞ —Ä–æ–∑–≤'—è–∑–∞–Ω–Ω—è —Å–ø–æ—Ä—ñ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –ø—Ä–∏ –ª–∏—Å—Ç–µ—á–µ–Ω–Ω—ñ —Å—Ç—Ä–æ–∫—É

### ‚úÖ –°–ø—Ä–∞–≤–µ–¥–ª–∏–≤—ñ—Å—Ç—å
- –û–±–∏–¥–≤—ñ —Å—Ç–æ—Ä–æ–Ω–∏ –ø–æ–≤–∏–Ω–Ω—ñ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏
- –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å –≤—ñ–¥–∫—Ä–∏—Ç–∏ —Å–ø—ñ—Ä –Ω–∞ –±—É–¥—å-—è–∫–æ–º—É –µ—Ç–∞–ø—ñ
- –ú–æ–¥–µ—Ä–∞—Ç–æ—Ä–∏ –º–æ–∂—É—Ç—å —Ä–æ–∑–≥–ª—è–Ω—É—Ç–∏ —Å–ø—Ä–∞–≤—É
- –ü—Ä–æ–∑–æ—Ä–∏–π –ø—Ä–æ—Ü–µ—Å —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—ñ–≤

### ‚úÖ –ö–æ–º—Ñ–æ—Ä—Ç
- –ö–æ–º—ñ—Å—ñ—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∏ —Ç—ñ–ª—å–∫–∏ 5%
- –ú–∏—Ç—Ç—î–≤–∞ –≤–∏–ø–ª–∞—Ç–∞ –ø—ñ—Å–ª—è –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–≤—ñ–ª—å–Ω–µ–Ω–Ω—è –∫–æ—à—Ç—ñ–≤
- –°–ø–æ–≤—ñ—â–µ–Ω–Ω—è –Ω–∞ –∫–æ–∂–Ω–æ–º—É –µ—Ç–∞–ø—ñ

## üîÑ –ü—Ä–æ—Ü–µ—Å –ø–ª–∞—Ç–µ–∂—É

```
1. AWAITING_CLIENT
   ‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞
   ‚îî‚îÄ> –ö–ª—ñ—î–Ω—Ç –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—î –ø–ª–∞—Ç—ñ–∂
   
2. AWAITING_MASTER  
   ‚è≥ –ü–ª–∞—Ç—ñ–∂ –æ—Ç—Ä–∏–º–∞–Ω–æ, –∂–¥–µ–º–æ —Ä–æ–±–æ—Ç–∏
   ‚îî‚îÄ> –ú–∞—Å—Ç–µ—Ä –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—î –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
   
3. CONFIRMED_BY_MASTER
   ‚è≥ –†–∞–±–æ—Ç–∞ –≥–æ—Ç–æ–≤–∞, –∂–¥–µ–º –∫–ª–∏–µ–Ω—Ç–∞
   ‚îî‚îÄ> –ö–ª—ñ—î–Ω—Ç –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—î —è–∫—ñ—Å—Ç—å
   
4. RELEASED_TO_MASTER ‚úÖ
   üí∞ –ü–ª–∞—Ç—ñ–∂ –≤–∏–ø–ª–∞—á–µ–Ω–æ –º–∞—Å—Ç–µ—Ä—É
   
–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó:
- DISPUTED - —Å–ø—ñ—Ä —É —Ä–æ–∑–≥–ª—è–¥—ñ
- REFUNDED_TO_CLIENT - –ø–ª–∞—Ç—ñ–∂ –ø–æ–≤–µ—Ä–Ω–µ–Ω–æ
- CANCELLED - —Å–∫–∞—Å–æ–≤–∞–Ω–æ
```

## üíæ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–∏—Ö

```typescript
interface EscrowPayment {
  id: string;
  orderId: string;
  amount: number;
  currency: 'UAH' | 'USD' | 'EUR';
  clientId: string;
  masterId: string;
  status: EscrowStatus;
  
  // –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –æ–±–æ—Ö —Å—Ç–æ—Ä—ñ–Ω
  clientConfirmed: boolean;
  clientConfirmedAt?: string;
  masterConfirmed: boolean;
  masterConfirmedAt?: string;
  
  // –ü–ª–∞—Ç—ñ–∂
  paymentMethod: 'card' | 'bank_transfer' | 'crypto' | 'mono' | 'privat24';
  
  // –ö–æ–º—ñ—Å—ñ—è (5%)
  platformFeePercent: number;
  platformFeeAmount: number;
  masterReceiveAmount: number;
  
  // –°—Ä–æ–∫–∏
  createdAt: string;
  expiresAt: string; // 30 –¥–Ω—ñ–≤
  releasedAt?: string;
  refundedAt?: string;
}

enum EscrowStatus {
  AWAITING_CLIENT = 'awaiting_client',
  AWAITING_MASTER = 'awaiting_master',
  CONFIRMED_BY_MASTER = 'confirmed_by_master',
  RELEASED_TO_MASTER = 'released_to_master',
  REFUNDED_TO_CLIENT = 'refunded_to_client',
  DISPUTED = 'disputed',
  CANCELLED = 'cancelled'
}
```

## üéØ API –ú–µ—Ç–æ–¥–∏

### createEscrowPayment()
–°—Ç–≤–æ—Ä—é—î –Ω–æ–≤–∏–π escrow –ø–ª–∞—Ç—ñ–∂ –¥–ª—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è

```typescript
escrowService.createEscrowPayment(
  orderId: string,
  clientId: string,
  masterId: string,
  amount: number,
  currency: 'UAH' = 'UAH',
  paymentMethod: 'card' = 'card'
): EscrowPayment
```

### confirmPaymentByClient()
–ö–ª—ñ—î–Ω—Ç –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—î –ø–ª–∞—Ç—ñ–∂ (–ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å –≥—Ä–æ—à—ñ)

```typescript
escrowService.confirmPaymentByClient(escrowId: string): EscrowPayment
```

### confirmWorkByMaster()
–ú–∞—Å—Ç–µ—Ä –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—î –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —Ä–æ–±–æ—Ç–∏

```typescript
escrowService.confirmWorkByMaster(escrowId: string): EscrowPayment
```

### approveWorkByClient()
–ö–ª—ñ—î–Ω—Ç –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—î —è–∫—ñ—Å—Ç—å —Ä–æ–±–æ—Ç–∏ —ñ –∑–≤—ñ–ª—å–Ω—è—î –ø–ª–∞—Ç—ñ–∂

```typescript
escrowService.approveWorkByClient(escrowId: string): EscrowPayment
```

### openDispute()
–í—ñ–¥–∫—Ä–∏—Ç–∏ —Å–ø—ñ—Ä —è–∫—â–æ –≤–∏–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º–∏

```typescript
escrowService.openDispute(
  escrowId: string,
  reason: string,
  initiatedBy: 'client' | 'master'
): EscrowPayment
```

### resolveDisputeInClientFavor()
–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä –ø–æ–≤–µ—Ä—Ç–∞—î –≥—Ä–æ—à—ñ –∫–ª—ñ—î–Ω—Ç—É

```typescript
escrowService.resolveDisputeInClientFavor(
  escrowId: string,
  reason: string
): EscrowPayment
```

### resolveDisputeInMasterFavor()
–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä –≤–∏–ø–ª–∞—á—É—î –≥—Ä–æ—à—ñ –º–∞—Å—Ç–µ—Ä—É

```typescript
escrowService.resolveDisputeInMasterFavor(
  escrowId: string,
  reason: string
): EscrowPayment
```

## üõ†Ô∏è –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö

### –Ø–∫ –¥–æ–¥–∞—Ç–∏ escrow –¥–æ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è

```tsx
import { EscrowPaymentManager } from './components/EscrowPaymentManager';

function OrderDetail() {
  return (
    <EscrowPaymentManager
      orderId="order-123"
      clientId="client-1"
      masterId="master-1"
      amount={44000}  // –≥—Ä–∏–≤–Ω—ñ
      userRole="client"  // –∞–±–æ "master"
    />
  );
}
```

### –°—Ü–µ–Ω–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

1. **–ö–ª—ñ—î–Ω—Ç —Å—Ç–≤–æ—Ä—é—î –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è**
   - Escrow –ø–ª–∞—Ç—ñ–∂ –≥–æ—Ç—É—î—Ç—å—Å—è
   - –ö–ª—ñ—î–Ω—Ç –æ—Ç—Ä–∏–º—É—î —É–≤–µ–¥–æ–º–ª–µ–Ω–Ω—è

2. **–ö–ª—ñ—î–Ω—Ç –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—î –ø–ª–∞—Ç—ñ–∂**
   - –ì—Ä–æ—à—ñ –ø–µ—Ä–µ–≤–æ–¥—è—Ç—å—Å—è –≤ escrow
   - –ú–∞—Å—Ç–µ—Ä –æ—Ç—Ä–∏–º—É—î —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è

3. **–ú–∞—Å—Ç–µ—Ä –≤–∏–∫–æ–Ω—É—î —Ä–æ–±–æ—Ç—É**
   - –ú–∞—Å—Ç–µ—Ä –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—î –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è
   - –ö–ª—ñ—î–Ω—Ç –æ—Ç—Ä–∏–º—É—î —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏

4. **–ö–ª—ñ—î–Ω—Ç –ø–µ—Ä–µ–≤—ñ—Ä—è—î —Ä–æ–±–æ—Ç—É**
   - –Ø–∫—â–æ –≤—Å–µ –û–ö - –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—î
   - –ü–ª–∞—Ç—ñ–∂ –≤–∏–≤—ñ–ª—å–Ω—è—î—Ç—å—Å—è –º–∞—Å—Ç–µ—Ä—É

5. **–Ø–∫—â–æ –≤–∏–Ω–∏–∫–Ω—É–ª–∏ –ø—Ä–æ–±–ª–µ–º–∏**
   - –û–¥–Ω–∞ –∑—ñ —Å—Ç–æ—Ä—ñ–Ω –≤—ñ–¥–∫—Ä–∏–≤–∞—î —Å–ø—ñ—Ä
   - –ú–æ–¥–µ—Ä–∞—Ç–æ—Ä —Ä–æ–∑–≥–ª—è–¥–∞—î —Å–ø—Ä–∞–≤—É (24-48 –≥–æ–¥–∏–Ω)
   - –ü—Ä–∏–π–Ω—è—î—Ç—å—Å—è —Ä—ñ—à–µ–Ω–Ω—è

## üìä –ö–æ–º—ñ—Å—ñ—ó

- **–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞**: 5%
- **–ú–∞—Å—Ç–µ—Ä –æ—Ç—Ä–∏–º—É—î**: 95% –≤—ñ–¥ —Å—É–º–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
- **–ü—Ä–∏–∫–ª–∞–¥**: –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è 1000 –≥—Ä–Ω
  - –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞: 50 –≥—Ä–Ω
  - –ú–∞—Å—Ç–µ—Ä: 950 –≥—Ä–Ω

## ‚è∞ –°—Ä–æ–∫–∏

- **–î—ñ—è escrow**: 30 –¥–Ω—ñ–≤
- **–†–æ–∑–≥–ª—è–¥ —Å–ø–æ—Ä—É**: 24-48 –≥–æ–¥–∏–Ω
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è**: –Ø–∫—â–æ –∫–ª—ñ—î–Ω—Ç –Ω–µ –ø–ª–∞—Ç–∏—Ç—å –∑–∞ 30 –¥–Ω—ñ–≤

## üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–Ω—è

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –Ω–∞–¥—Å–∏–ª–∞—î —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è:

1. –ö–ª—ñ—î–Ω—Ç—É: –ú–∞—Å—Ç–µ—Ä –æ—Ç—Ä–∏–º–∞–≤ –ø–ª–∞—Ç—ñ–∂
2. –ú–∞—Å—Ç–µ—Ä—É: –ö–ª—ñ—î–Ω—Ç –ø–µ—Ä–µ–≤—ñ–≤ –≥—Ä–æ—à—ñ
3. –ú–∞—Å—Ç–µ—Ä—É: –ü–ª–∞—Ç—ñ–∂ –∑–≤—ñ–ª—å–Ω–µ–Ω–æ
4. –ö–ª—ñ—î–Ω—Ç—É: –ú–∞—Å—Ç–µ—Ä –∑–∞–≤–µ—Ä—à–∏–≤ —Ä–æ–±–æ—Ç—É
5. –û–±–æ–º: –°–ø—ñ—Ä –≤—ñ–¥–∫—Ä–∏—Ç–æ
6. –í—Å—ñ–º: –°–ø—ñ—Ä —Ä–æ–∑–≤'—è–∑–∞–Ω–æ

## üîê –ë–µ–∑–ø–µ–∫–∞

- –í—Å–µ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ localStorage (–¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó)
- –ì–æ—Ç–æ–≤–æ –¥–æ –º—ñ–≥—Ä–∞—Ü—ñ—ó –Ω–∞ Backend + –ë–î
- –ë–µ–∑ –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø—É –¥–æ –∫–æ—à—Ç—ñ–≤ –æ–±–æ–º —Å—Ç–æ—Ä–æ–Ω–∞–º
- –õ–æ–≥—É–≤–∞–Ω–Ω—è –≤—Å—ñ—Ö –¥—ñ–π

## üìù –ü—Ä–∏–∫–ª–∞–¥–∏ —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤

### –°—Ü–µ–Ω–∞—Ä—ñ–π 1: –£—Å–ø—ñ—à–Ω–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
```
1. –ö–ª—ñ—î–Ω—Ç –ø–ª–∞—Ç–∏—Ç—å 5000 –≥—Ä–Ω ‚Üí Escrow
2. –ú–∞—Å—Ç–µ—Ä –ø—Ä–∞—Ü—é—î 2 –¥–Ω—ñ
3. –ú–∞—Å—Ç–µ—Ä –ø–∏—à–µ "–≥–æ—Ç–æ–≤–æ" ‚Üí CONFIRMED_BY_MASTER
4. –ö–ª—ñ—î–Ω—Ç –ø–µ—Ä–µ–≤—ñ—Ä—è—î ‚Üí "–≤—Å–µ –¥–æ–±—Ä–µ"
5. –ö–ª—ñ—î–Ω—Ç –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—î ‚Üí RELEASED_TO_MASTER
6. –ú–∞—Å—Ç–µ—Ä –æ—Ç—Ä–∏–º—É—î 4750 –≥—Ä–Ω (5% –∫–æ–º—ñ—Å—ñ—è = 250 –≥—Ä–Ω)
```

### –°—Ü–µ–Ω–∞—Ä—ñ–π 2: –°–ø—ñ—Ä
```
1. –ö–ª—ñ—î–Ω—Ç –ø–ª–∞—Ç–∏—Ç—å 5000 –≥—Ä–Ω ‚Üí Escrow
2. –ú–∞—Å—Ç–µ—Ä –ø—Ä–∞—Ü—é—î 2 –¥–Ω—ñ
3. –ú–∞—Å—Ç–µ—Ä –ø–∏—à–µ "–≥–æ—Ç–æ–≤–æ"
4. –ö–ª—ñ—î–Ω—Ç –±–∞—á–∏—Ç—å "—Ü–µ –Ω–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ!"
5. –ö–ª—ñ—î–Ω—Ç –≤—ñ–¥–∫—Ä–∏–≤–∞—î —Å–ø—ñ—Ä ‚Üí DISPUTED
6. –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä —Ä–æ–∑–≥–ª—è–¥–∞—î (24 –≥–æ–¥–∏–Ω–∏)
7. –†—ñ—à–µ–Ω–Ω—è: –ø–ª–∞—Ç—ñ–∂ –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è –∫–ª—ñ—î–Ω—Ç—É
```

### –°—Ü–µ–Ω–∞—Ä—ñ–π 3: –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è
```
1. –ö–ª—ñ—î–Ω—Ç –ø–ª–∞—Ç–∏—Ç—å 5000 –≥—Ä–Ω ‚Üí Escrow
2. –ú–∞—Å—Ç–µ—Ä –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î 30 –¥–Ω—ñ–≤
3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è ‚Üí REFUNDED_TO_CLIENT
4. –ö–ª—ñ—î–Ω—Ç –æ—Ç—Ä–∏–º—É—î 5000 –≥—Ä–Ω –Ω–∞–∑–∞–¥
```

## üöÄ –ú–∞–π–±—É—Ç–Ω—ñ —É–¥–æ—Å–∫–æ–Ω–∞–ª–µ–Ω–Ω—è

- [ ] –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ —Ä–µ–∞–ª—å–Ω–∏–º–∏ –ø–ª–∞—Ç—ñ–∂–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
- [ ] Crypto –ø–ª–∞—Ç–µ–∂—ñ (Bitcoin, Ethereum)
- [ ] Push-—Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è
- [ ] Email —É–≤–µ–¥–æ–º–ª–µ–Ω–Ω—è
- [ ] SMS –æ–ø–æ–≤—ñ—â–µ–Ω–Ω—è
- [ ] –í–µ–±-—Ö—É–∫–∏ –¥–ª—è Backend
- [ ] Analytics –¥–∞—à–±–æ—Ä–¥
- [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–ø–æ—Ä—ñ–≤
