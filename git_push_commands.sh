#!/bin/bash
# –ö–æ–º–∞–Ω–¥–∏ –¥–ª—è –≤–∏–≥—Ä—É–∑–∫–∏ –Ω–∞ GitHub

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —á–∏ git –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
if ! command -v git &> /dev/null; then
    echo "‚ö†Ô∏è  Git –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ!"
    echo "–í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å git: sudo apt install git"
    exit 1
fi

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —á–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
if [ ! -d ".git" ]; then
    echo "üì¶ –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é..."
    git init
    
    echo "üîó –î–æ–¥–∞–π—Ç–µ remote —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π (–∑–∞–º—ñ–Ω—ñ—Ç—å URL –Ω–∞ –≤–∞—à):"
    echo "git remote add origin https://github.com/PlevanDM/RP-Modern.git"
    echo ""
    echo "–ê–±–æ —è–∫—â–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π –≤–∂–µ —ñ—Å–Ω—É—î:"
    echo "git remote set-url origin https://github.com/PlevanDM/RP-Modern.git"
fi

# –î–æ–¥–∞–≤–∞–Ω–Ω—è –∑–º—ñ–Ω
echo "üìù –î–æ–¥–∞—é –≤—Å—ñ –∑–º—ñ–Ω–∏..."
git add -A

# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è commit
echo "üíæ –°—Ç–≤–æ—Ä—é—é commit..."
git commit -m "fix: –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ –≤—Å—ñ –∫—Ä–∏—Ç–∏—á–Ω—ñ –ø–æ–º–∏–ª–∫–∏ –ª—ñ–Ω—Ç–µ—Ä–∞

- –£—Å—É–Ω—É—Ç–æ –≤—Å—ñ any —Ç–∏–ø–∏, –∑–∞–º—ñ–Ω–µ–Ω–æ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ñ —Ç–∏–ø–∏
- –í–∏–¥–∞–ª–µ–Ω–æ –≤—Å—ñ –Ω–µ–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—ñ —ñ–º–ø–æ—Ä—Ç–∏ —Ç–∞ –∑–º—ñ–Ω–Ω—ñ  
- –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ –≤—Å—ñ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–Ω—ñ –ø–æ–º–∏–ª–∫–∏
- –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ React hooks dependencies warnings
- –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ –≤—Å—ñ catch –±–ª–æ–∫–∏
- –î–æ–¥–∞–Ω–æ useCallback –¥–ª—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó

–†–µ–∑—É–ª—å—Ç–∞—Ç: 0 –ø–æ–º–∏–ª–æ–∫, 5 –Ω–µ–∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω—å (fast refresh)"

# Push –Ω–∞ GitHub
echo "üöÄ –í—ñ–¥–ø—Ä–∞–≤–ª—è—é –Ω–∞ GitHub..."
BRANCH=$(git branch --show-current 2>/dev/null || echo "main")
echo "–ü–æ—Ç–æ—á–Ω–∞ –≥—ñ–ª–∫–∞: $BRANCH"
echo ""
echo "–í–∏–∫–æ–Ω–∞–π—Ç–µ: git push -u origin $BRANCH"
echo ""
echo "–Ø–∫—â–æ —Ü–µ –ø–µ—Ä—à–∏–π push, –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ:"
echo "git push -u origin $BRANCH --force"
